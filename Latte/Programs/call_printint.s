
.extern _printInt
.extern _printString
.extern _readString
.extern _readInt
.extern _error
.extern _concatStrings
.extern _compareStrings
.intel_syntax
.global _main
_main:
PUSH RBP
MOV RBP, RSP
PUSH R15
PUSH R14
PUSH R13
PUSH R12
PUSH 1
PUSH 50
POP RSI
POP RDI
CALL _fromTo
MOV R15, RAX
PUSH R15
POP RDI
CALL _length
MOV R14, RAX
PUSH R14
POP RDI
CALL _printInt
PUSH 1
PUSH 100
POP RSI
POP RDI
CALL _fromTo
MOV R13, RAX
PUSH R13
POP RDI
CALL _length2
MOV R12, RAX
PUSH R12
POP RDI
CALL _printInt
MOV RAX, 0
POP R12
POP R13
POP R14
POP R15
MOV RSP, RBP
POP RBP
RET
_head:
PUSH RBP
MOV RBP, RSP
PUSH R15
MOV [RBP-16], RDI
SUB RSP, 8
MOV R15, [RBP-16]
MOV RAX, [R15]
ADD RSP, 8
POP R15
MOV RSP, RBP
POP RBP
RET
_cons:
PUSH RBP
MOV RBP, RSP
PUSH R15
PUSH R14
PUSH R13
MOV [RBP-32], RDI
MOV [RBP-40], RSI
SUB RSP, 24
MOV R15, 0
MOV RDI, 16
CALL _malloc
MOV R15, RAX
MOV R14, [RBP-32]
LEA RAX, [R15]
MOV [RAX], R14
MOV R14, RAX
MOV R13, [RBP-40]
LEA RAX, [R15+8]
MOV [RAX], R13
MOV R13, RAX
MOV RAX, R15
ADD RSP, 24
POP R13
POP R14
POP R15
MOV RSP, RBP
POP RBP
RET
_length:
PUSH RBP
MOV RBP, RSP
PUSH R15
PUSH R14
MOV [RBP-24], RDI
SUB RSP, 8
MOV R15, [RBP-24]
MOV [RBP-24], R15
CMP R15, 0
MOV R15, 0
 SETE R15B
TEST R15, R15
JE l1
MOV RAX, 0
ADD RSP, 8
POP R14
POP R15
MOV RSP, RBP
POP RBP
RET
JMP l2
l1:
MOV R15, [RBP-24]
PUSH 0
MOV RAX, [R15+8]
PUSH RAX
POP RDI
CALL _length
ADD RSP, 8
MOV R14, RAX
ADD R14, 1
MOV RAX, R14
ADD RSP, 8
POP R14
POP R15
MOV RSP, RBP
POP RBP
RET
l2:
ADD RSP, 8
POP R14
POP R15
MOV RSP, RBP
POP RBP
RET
_fromTo:
PUSH RBP
MOV RBP, RSP
PUSH R15
PUSH R14
PUSH R13
PUSH R12
PUSH RBX
MOV [RBP-48], RDI
MOV [RBP-56], RSI
SUB RSP, 16
MOV R15, [RBP-48]
MOV R14, [RBP-56]
MOV [RBP-48], R15
MOV [RBP-56], R14
CMP R15, R14
MOV R14, 0
SETG R14B
TEST R14, R14
JE l4
MOV RAX, 0
ADD RSP, 16
POP RBX
POP R12
POP R13
POP R14
POP R15
MOV RSP, RBP
POP RBP
RET
JMP l5
l4:
MOV R15, [RBP-48]
MOV R14, R15
ADD R14, 1
MOV R13, [RBP-56]
PUSH 0
PUSH R14
PUSH R13
POP RSI
POP RDI
CALL _fromTo
ADD RSP, 8
MOV R12, RAX
PUSH 0
PUSH R15
PUSH R12
POP RSI
POP RDI
CALL _cons
ADD RSP, 8
MOV RBX, RAX
MOV RAX, RBX
ADD RSP, 16
POP RBX
POP R12
POP R13
POP R14
POP R15
MOV RSP, RBP
POP RBP
RET
l5:
ADD RSP, 16
POP RBX
POP R12
POP R13
POP R14
POP R15
MOV RSP, RBP
POP RBP
RET
_length2:
PUSH RBP
MOV RBP, RSP
PUSH R15
PUSH R14
MOV [RBP-24], RDI
SUB RSP, 16
MOV R15, 0
MOV [RBP-32], R15
l6:
MOV R15, [RBP-24]
MOV [RBP-24], R15
CMP R15, 0
MOV R15, 0
SETNE R15B
TEST R15, R15
JE l8
MOV R15, [RBP-32]
MOV [RBP-32], R15
INC R15
MOV R14, [RBP-24]
MOV [RBP-24], R14
MOV R14, [R14+8]
MOV [RBP-24], R14
MOV [RBP-32], R15
JMP l6
l8:
MOV R15, [RBP-32]
MOV RAX, R15
ADD RSP, 16
POP R14
POP R15
MOV RSP, RBP
POP RBP
RET
