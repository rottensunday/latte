
.extern _printInt
.extern _printString
.extern _readString
.extern _readInt
.extern _error
.extern _concatStrings
.extern _compareStrings
.intel_syntax
.global _main
str0:
.string ""
str1:
.string "="
str2:
.string "hello */"
str3:
.string "/* world"
_main:
PUSH RBP
MOV RBP, RSP
SUB RSP, 80
MOV RDI, 10
CALL _fac
MOV [RBP-8], RAX
MOV RAX, [RBP-8]
MOV RDI, RAX
CALL _printInt
MOV RDI, 10
CALL _rfac
MOV [RBP-16], RAX
MOV RAX, [RBP-16]
MOV RDI, RAX
CALL _printInt
MOV RDI, 10
CALL _mfac
MOV [RBP-24], RAX
MOV RAX, [RBP-24]
MOV RDI, RAX
CALL _printInt
MOV RDI, 10
CALL _ifac
MOV [RBP-32], RAX
MOV RAX, [RBP-32]
MOV RDI, RAX
CALL _printInt
LEA RAX, str0[RIP]
MOV [RBP-40], RAX
MOV QWORD PTR [RBP-48], 10
MOV QWORD PTR [RBP-56], 1
l0:
MOV RAX, [RBP-48]
CMP RAX, 0
SETG [RBP-57]
MOVZX RAX, BYTE PTR [RBP-57]
TEST RAX, RAX
JE l2
l1:
MOV RAX, [RBP-56]
MOV RDI, [RBP-48]
IMUL RAX, RDI
MOV [RBP-65], RAX
MOV RAX, [RBP-65]
MOV [RBP-56], RAX
DEC QWORD PTR [RBP-48]
JMP l0
l2:
MOV RAX, [RBP-56]
MOV RDI, RAX
CALL _printInt
LEA RDI, str1[RIP]
MOV RSI, 60
CALL _repStr
MOV [RBP-73], RAX
MOV RAX, [RBP-73]
MOV RDI, RAX
CALL _printString
LEA RDI, str2[RIP]
CALL _printString
LEA RDI, str3[RIP]
CALL _printString
MOV RAX, 0
MOV RSP, RBP
POP RBP
RET
_fac:
PUSH RBP
MOV RBP, RSP
MOV [RBP-8], RDI
SUB RSP, 48
MOV QWORD PTR [RBP-16], 0
MOV QWORD PTR [RBP-24], 0
MOV QWORD PTR [RBP-16], 1
MOV RAX, [RBP-8]
MOV [RBP-24], RAX
l4:
MOV RAX, [RBP-24]
CMP RAX, 0
SETG [RBP-25]
MOVZX RAX, BYTE PTR [RBP-25]
TEST RAX, RAX
JE l6
l5:
MOV RAX, [RBP-16]
MOV RDI, [RBP-24]
IMUL RAX, RDI
MOV [RBP-33], RAX
MOV RAX, [RBP-33]
MOV [RBP-16], RAX
MOV RAX, [RBP-24]
SUB RAX, 1
MOV [RBP-41], RAX
MOV RAX, [RBP-41]
MOV [RBP-24], RAX
JMP l4
l6:
MOV RAX, [RBP-16]
MOV RSP, RBP
POP RBP
RET
_rfac:
PUSH RBP
MOV RBP, RSP
MOV [RBP-8], RDI
SUB RSP, 40
MOV RAX, [RBP-8]
CMP RAX, 0
SETE [RBP-9]
MOVZX RAX, BYTE PTR [RBP-9]
TEST RAX, RAX
JE l9
l8:
MOV RAX, 1
MOV RSP, RBP
POP RBP
RET
JMP l10
l9:
MOV RAX, [RBP-8]
SUB RAX, 1
MOV [RBP-17], RAX
PUSH 0
MOV RAX, [RBP-17]
MOV RDI, RAX
CALL _rfac
ADD RSP, 8
MOV [RBP-25], RAX
MOV RAX, [RBP-8]
MOV RDI, [RBP-25]
IMUL RAX, RDI
MOV [RBP-33], RAX
MOV RAX, [RBP-33]
MOV RSP, RBP
POP RBP
RET
l10:
MOV RSP, RBP
POP RBP
RET
_mfac:
PUSH RBP
MOV RBP, RSP
MOV [RBP-8], RDI
SUB RSP, 40
MOV RAX, [RBP-8]
CMP RAX, 0
SETE [RBP-9]
MOVZX RAX, BYTE PTR [RBP-9]
TEST RAX, RAX
JE l12
l11:
MOV RAX, 1
MOV RSP, RBP
POP RBP
RET
JMP l13
l12:
MOV RAX, [RBP-8]
SUB RAX, 1
MOV [RBP-17], RAX
PUSH 0
MOV RAX, [RBP-17]
MOV RDI, RAX
CALL _nfac
ADD RSP, 8
MOV [RBP-25], RAX
MOV RAX, [RBP-8]
MOV RDI, [RBP-25]
IMUL RAX, RDI
MOV [RBP-33], RAX
MOV RAX, [RBP-33]
MOV RSP, RBP
POP RBP
RET
l13:
MOV RSP, RBP
POP RBP
RET
_nfac:
PUSH RBP
MOV RBP, RSP
MOV [RBP-8], RDI
SUB RSP, 40
MOV RAX, [RBP-8]
CMP RAX, 0
SETNE [RBP-9]
MOVZX RAX, BYTE PTR [RBP-9]
TEST RAX, RAX
JE l15
l14:
MOV RAX, [RBP-8]
SUB RAX, 1
MOV [RBP-17], RAX
PUSH 0
MOV RAX, [RBP-17]
MOV RDI, RAX
CALL _mfac
ADD RSP, 8
MOV [RBP-25], RAX
MOV RAX, [RBP-25]
MOV RDI, [RBP-8]
IMUL RAX, RDI
MOV [RBP-33], RAX
MOV RAX, [RBP-33]
MOV RSP, RBP
POP RBP
RET
JMP l16
l15:
MOV RAX, 1
MOV RSP, RBP
POP RBP
RET
l16:
MOV RSP, RBP
POP RBP
RET
_ifac:
PUSH RBP
MOV RBP, RSP
MOV [RBP-8], RDI
SUB RSP, 16
MOV RDI, 1
MOV RAX, [RBP-8]
MOV RSI, RAX
CALL _ifac2f
MOV [RBP-16], RAX
MOV RAX, [RBP-16]
MOV RSP, RBP
POP RBP
RET
_ifac2f:
PUSH RBP
MOV RBP, RSP
MOV [RBP-8], RDI
MOV [RBP-16], RSI
SUB RSP, 80
MOV RDI, [RBP-8]
MOV RSI, [RBP-16]
CMP RDI, RSI
SETE [RBP-17]
MOVZX RAX, BYTE PTR [RBP-17]
TEST RAX, RAX
JE l18
l17:
MOV RAX, [RBP-8]
MOV RSP, RBP
POP RBP
RET
l18:
MOV RAX, [RBP-8]
MOV RDI, [RBP-16]
CMP RAX, RDI
SETG [RBP-18]
MOVZX RAX, BYTE PTR [RBP-18]
TEST RAX, RAX
JE l20
l19:
MOV RAX, 1
MOV RSP, RBP
POP RBP
RET
l20:
MOV QWORD PTR [RBP-26], 0
MOV RAX, [RBP-8]
MOV RDI, [RBP-16]
ADD RAX, RDI
MOV [RBP-34], RAX
MOV RAX, [RBP-34]
MOV RDI, 2
MOV RAX, RAX
CQO 
IDIV RDI
MOV [RBP-42], RAX
MOV RAX, [RBP-42]
MOV [RBP-26], RAX
MOV RAX, [RBP-8]
MOV RDI, RAX
MOV RAX, [RBP-26]
MOV RSI, RAX
CALL _ifac2f
MOV [RBP-50], RAX
MOV RAX, [RBP-26]
ADD RAX, 1
MOV [RBP-58], RAX
MOV RAX, [RBP-58]
MOV RDI, RAX
MOV RAX, [RBP-16]
MOV RSI, RAX
CALL _ifac2f
MOV [RBP-66], RAX
MOV RAX, [RBP-50]
MOV RDI, [RBP-66]
IMUL RAX, RDI
MOV [RBP-74], RAX
MOV RAX, [RBP-74]
MOV RSP, RBP
POP RBP
RET
_repStr:
PUSH RBP
MOV RBP, RSP
MOV [RBP-8], RDI
MOV [RBP-16], RSI
SUB RSP, 48
LEA RAX, str0[RIP]
MOV [RBP-24], RAX
MOV QWORD PTR [RBP-32], 0
l21:
MOV RAX, [RBP-32]
MOV RDI, [RBP-16]
CMP RAX, RDI
SETL [RBP-33]
MOVZX RAX, BYTE PTR [RBP-33]
TEST RAX, RAX
JE l23
l22:
MOV RDI, [RBP-24]
MOV RSI, [RBP-8]
CALL __concatStrings
MOV [RBP-41], RAX
MOV RAX, [RBP-41]
MOV [RBP-24], RAX
INC QWORD PTR [RBP-32]
JMP l21
l23:
MOV RAX, [RBP-24]
MOV RSP, RBP
POP RBP
RET
